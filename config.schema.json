{
  "pluginAlias": "HomebridgeSomneo",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Plugin Name",
        "type": "string",
        "required": true,
        "default": "Homebridge Somneo",
        "description": "Name for plugin that will appear in Homebridge Logs."
      },
      "somneos": {
        "type": "array",
        "items": {
          "title": "Somneo Clock",
          "type": "object",
          "properties": {
            "name": {
              "title": "Name",
              "type": "string",
              "required": true,
              "placeholder": "Somneo",
              "description": "Name of the Somneo clock."
            },
            "host": {
              "title": "Host",
              "type": "string",
              "required": true,
              "format": "ipv4",
              "description": "IP Address of the Somneo clock."
            },
            "sensors": {
              "type": "object",
              "properties": {
                "humidity": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable Humidity Sensor",
                      "type": "boolean",
                      "default": true
                    }
                  }
                },
                "lux": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable Lux Sensor",
                      "type": "boolean",
                      "default": true
                    }
                  }
                },
                "temperature": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable Temperature Sensor",
                      "type": "boolean",
                      "default": true
                    }
                  }
                }
              }
            },
            "lights": {
              "type": "object",
              "properties": {
                "mainLight": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable Main Light",
                      "type": "boolean",
                      "default": true
                    }
                  }
                },
                "nightLight": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable Night Light",
                      "type": "boolean",
                      "default": true
                    }
                  }
                }
              }
            },
            "switches": {
              "type": "object",
              "properties": {
                "relaxBreathe": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable RelaxBreathe Program",
                      "type": "boolean",
                      "default": true
                    }
                  }
                },
                "sunset": {
                  "type": "object",
                  "properties": {
                    "isEnabled": {
                      "title": "Enable Sunset Program",
                      "type": "boolean",
                      "default": true
                    },
                    "duration": {
                      "title": "Duration of Program",
                      "type": "number",
                      "default": 30,
                      "oneOf": [
                        {
                          "title": "5 Minutes",
                          "enum": [
                            5
                          ]
                        },
                        {
                          "title": "10 Minutes",
                          "enum": [
                            10
                          ]
                        },
                        {
                          "title": "15 Minutes",
                          "enum": [
                            15
                          ]
                        },
                        {
                          "title": "20 Minutes",
                          "enum": [
                            20
                          ]
                        },
                        {
                          "title": "30 Minutes",
                          "enum": [
                            30
                          ]
                        },
                        {
                          "title": "45 Minutes",
                          "enum": [
                            45
                          ]
                        },
                        {
                          "title": "60 Minutes",
                          "enum": [
                            60
                          ]
                        }
                      ],
                      "condition": {
                        "functionBody": "return model.somneos[arrayIndices[0]].switches.sunset.isEnabled === true;"
                      }
                    },
                    "lightIntensity": {
                      "title": "Light Intensity %",
                      "type": "integer",
                      "default": 80,
                      "minimum": 4,
                      "step": 4,
                      "maximum": 100,
                      "condition": {
                        "functionBody": "return model.somneos[arrayIndices[0]].switches.sunset.isEnabled === true;"
                      }
                    },
                    "colorScheme": {
                      "title": "Color Scheme",
                      "type": "number",
                      "default": 0,
                      "oneOf": [
                        {
                          "title": "Sunny Day",
                          "enum": [
                            0
                          ]
                        },
                        {
                          "title": "Island red",
                          "enum": [
                            1
                          ]
                        },
                        {
                          "title": "Nordic white",
                          "enum": [
                            2
                          ]
                        },
                        {
                          "title": "Carribean red",
                          "enum": [
                            3
                          ]
                        }
                      ],
                      "condition": {
                        "functionBody": "return model.somneos[arrayIndices[0]].switches.sunset.isEnabled === true;"
                      }
                    },
                    "ambientSounds": {
                      "title": "Ambient Sounds",
                      "type": "string",
                      "default": "1",
                      "oneOf": [
                        {
                          "title": "Soft Rain",
                          "enum": [
                            "1"
                          ]
                        },
                        {
                          "title": "Ocean Waves",
                          "enum": [
                            "2"
                          ]
                        },
                        {
                          "title": "Under Water",
                          "enum": [
                            "3"
                          ]
                        },
                        {
                          "title": "Summer Lake",
                          "enum": [
                            "4"
                          ]
                        },
                        {
                          "title": "No Sound",
                          "enum": [
                            "0"
                          ]
                        }
                      ],
                      "condition": {
                        "functionBody": "return model.somneos[arrayIndices[0]].switches.sunset.isEnabled === true;"
                      }
                    },
                    "volume": {
                      "title": "Volume %",
                      "type": "integer",
                      "default": 48,
                      "minimum": 1,
                      "maximum": 100,
                      "condition": {
                        "functionBody": "return model.somneos[arrayIndices[0]].switches.sunset.isEnabled === true && model.somneos[arrayIndices[0]].switches.sunset.ambientSounds !== '0';"
                      }
                    }
                  }
                }
              }
            },
            "audio": {
              "type": "object",
              "properties": {
                "isEnabled": {
                  "title": "Enable Audio",
                  "type": "boolean",
                  "default": true
                },
                "favoriteInput": {
                  "title": "Favorite Input",
                  "type": "number",
                  "oneOf": [
                    {
                      "title": "FM Preset 1",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "FM Preset 2",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "FM Preset 3",
                      "enum": [
                        3
                      ]
                    },
                    {
                      "title": "FM Preset 4",
                      "enum": [
                        4
                      ]
                    },
                    {
                      "title": "FM Preset 5",
                      "enum": [
                        5
                      ]
                    },
                    {
                      "title": "Auxiliary",
                      "enum": [
                        6
                      ]
                    }
                  ],
                  "description": "This is the input that will be used when the audio device is turned on.",
                  "condition": {
                    "functionBody": "return model.somneos[arrayIndices[0]].audio.isEnabled === true;"
                  }
                }
              }
            }
          }
        }
      },
      "pollingSeconds": {
        "title": "Polling Interval",
        "type": "number",
        "placeholder": 30,
        "description": "Interval (in seconds) to check status and update accessories."
      }
    }
  },
  "layout": [
    {
      "type": "section",
      "title": "Plugin Settings",
      "items": [
        "name"
      ]
    },
    {
      "type": "section",
      "items": [
        {
          "key": "somneos",
          "title": "Somneo Clocks",
          "type": "array",
          "orderable": false,
          "buttonText": "Add Somneo Clock",
          "items": [
            "somneos[].name",
            "somneos[].host",
            "somneos[].sensors.temperature.isEnabled",
            "somneos[].sensors.humidity.isEnabled",
            "somneos[].sensors.lux.isEnabled",
            "somneos[].lights.mainLight.isEnabled",
            "somneos[].lights.nightLight.isEnabled",
            "somneos[].switches.sunset.isEnabled",
            "somneos[].switches.sunset.duration",
            "somneos[].switches.sunset.lightIntensity",
            "somneos[].switches.sunset.colorScheme",
            "somneos[].switches.sunset.ambientSounds",
            "somneos[].switches.sunset.volume",
            "somneos[].switches.relaxBreathe.isEnabled",
            "somneos[].audio.isEnabled",
            "somneos[].audio.favoriteInput"
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "Advanced Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "pollingSeconds"
      ]
    }
  ]
}
